<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:o="http://omnifaces.org/ui">

	<h:form id="expenseForm" enctype="multipart/form-data">
		<fieldset style="margin-top: 50px; margin-left: 10px;">
			<!-- <legend> Expense Form </legend> -->
			<div class="panel panel-primary">
				<!-- <div class="panel-heading" style="background-color: #4CAF50"> -->
				<div class="panel-heading" style="background-color: #003576;">
					<p:outputLabel styleClass="header_color">Change Password</p:outputLabel>
				</div>
				<div class="panel-body" style="background-color: #EDEDED">
					<div class="ui-fluid">
						<p:panelGrid columns="3" columnClasses="ui-grid-col-2,ui-grid-col-10" layout="grid"
							styleClass="ui-panelgrid-blank">
						
							
							
							<p:outputLabel value="Old Password" for="oldPassword" />
							<h:panelGroup>
							
							<p:password id="oldPassword" required="true" label="Password"
								requiredMessage="Password field can not be null" size="50"  maxlength="50"
								style="background: #fff;" styleClass="ui-nbackground" validator="#{userRegistrationBean.validateOldPassword}" validatorMessage="Invalid password pattern">
								<p:ajax event="blur" update="oldPasswordMessage" />
								<f:validateRegex pattern="#{validation['pattern.password']}"></f:validateRegex>						      		
							</p:password>
							<p:message id="oldPasswordMessage" for="oldPassword" />	
							</h:panelGroup><br/>
							
							<p:outputLabel value="New Password" for="newPassword" />
							<h:panelGroup>
							<p:password id="newPassword" value="#{userRegistrationBean.users.password}" required="true"
								requiredMessage="The field can not be null" size="50" maxlength="50" feedback="true"
								style="background: #fff;" styleClass="ui-nbackground" validatorMessage="Invalid password pattern">
								<p:ajax event="blur" update="newPasswordMessage" />
								<f:validateRegex pattern="#{validation['pattern.password']}"></f:validateRegex>
							</p:password>
							<p:message id="newPasswordMessage" for="newPassword" />
							</h:panelGroup><br/>	
							
							<p:outputLabel value="Repeat Password" for="repeatPassword" />
							<h:panelGroup>
							<p:password id="repeatPassword" value="#{userRegistrationBean.passwordConfirm}" required="true"
								requiredMessage="Password can not be null" size="50" maxlength="50" validator="#{userRegistrationBean.validateSamePassword}"
								style="background: #fff;" styleClass="ui-nbackground" validatorMessage="Invalid password pattern">
								<p:ajax event="blur" update="repeatPasswordMessage" />
								<f:validateRegex pattern="#{validation['pattern.password']}"></f:validateRegex>
							</p:password>
							<p:message id="repeatPasswordMessage" for="repeatPassword" />
							</h:panelGroup><br/>																
							
							<!-- <p:outputLabel value="Invoice Number" for="invoice" styleClass="manufactury_padding" />
							<p:inputText id="invoice" style="background: #fff;" value="#{expenseBean.expense.invoiceNumber}" size="50"
								maxlength="255">

							</p:inputText> -->
							
							
							<!--  <p:outputLabel value="User" for="user" />
							<p:inputText id="user" 
								 size="50"  maxlength="255"
								style="background: #fff;" styleClass="ui-nbackground">
								  <o:validator validatorId="javax.faces.RegularExpression" pattern="#{validation['pattern.email']}"
					                                              message="#{validation['message.email']}" />
					              <f:validator validatorId="checkUserNameExist"></f:validator>
								  <p:ajax event="blur" update="userMessage"/>
							</p:inputText>
							<p:message id="userMessage" for="user" />  -->
		                     
		                    
                              <div></div>
                              <p:outputLabel>
                                 <p:ajax event="blur"/>
                              </p:outputLabel>
                              <p:commandButton value="Save" update="@form" process="@form" styleClass="background: #B61601 !important;" icon="ui-icon ui-icon-check"
							actionListener="#{userRegistrationBean.updatePassword}" style="background: #B61601 !important;color:#fff;width:35%" />
							
							<!-- <ui:fragment rendered="#{userRegistrationBean.showMessage}">
							   <p:messages id="messages" globalOnly="true" closable="true"></p:messages>
							</ui:fragment> -->
						</p:panelGrid>
					</div>
					<br />					
					
				</div>
			</div>
		</fieldset>
	</h:form>
   
	<p:dialog id="saveDialog" widgetVar="saveDialogWV" header="Change Password" modal="true" width="50%" height="300"
		showEffect="explode" style="margin-top: 100px;" responsive="true">
		<br />
		<span class="fa fa-check-circle fa-5x text-success" style="margin-left: 40%;" /><br/>
		<p:outputLabel value="Successfully change password" styleClass="okLabel" style="font-size: 24px;margin-left: 20%;-webkit-box-align: center;-webkit-box-flex: inherit;" />
		<br />
		<p:commandButton value="Ok" title="save expense" styleClass="okButton" 
			style="margin-top: 120px;background: #4CAF50;color: #fff;" onclick="PF('saveDialogWV').hide();" />
		<!-- <p:commandButton value="No" title="No" onclick="PF('saveDialogWV').hide();" styleClass="margin-1em"/>  -->
	</p:dialog>


	<style>
#expenseDate.ui-state-default, .ui-widget-content .ui-state-default,
	.ui-widget-header .ui-state-default {
	background: #fff;
}

.ui-button-icon-only {
	padding: 4px;
}

ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left ui-fileupload-choose
	{
	/* background: #f6f6f6; */
	
}

.ui-widget-header {
	/* background: #3667b3;  */
	
}
</style>
</ui:composition>